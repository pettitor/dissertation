\chapter{Characterization of the Content Delivery Networks on Autonomous System Level}\label{chap:aslevel}

%intro and problem
The performance evaluation of optimization mechanisms in hierarchical content delivery networks requires a thorough knowledge of the nature of current content delivery networks.
Such knowledge is required to reflect the characteristics of real-world overlay networks and to define models, parameters and relevant scenarios for performance evaluation.
This ensures that the results derived from performance analysis give meaningful insights for real-world scenarios.

The two most popular content delivery concepts are a) peer-to-peer networks (P2P) and b) content delivery networks (CDN).
To deliver content, it has to be transported from storage resources to clients.
In case of peer-to-peer networks peers contribute storage resources by serving chunks of data.
In content delivery networks the storage resources are managed data centers or caches.
While in the past peer-to-peer networks where responsible for the most part of traffic, the largest amount of traffic is now transported by CDNs.
%Dependent on the route the content takes The delivery of content produces costs
%The Internet is a network of autonomous systems.
%The scalability of the Internet is achieved by topological addressing.

%ISPs acquire transit providers to be connected to remote parts of the Internet or agree on peering relationships to exchange data without money flow.
In 2015 61\% of all Internet video was carried by CDNs according to \cite{cisco2015}.
The vast amount of traffic causes high costs for ISPs, who need to provide appropriate transport infrastructure and pay transit fees incurred.
In order to develop traffic management mechanisms, aiming to reduce transit traffic and optimize content delivery, it is crucial to understand the current situation of content delivery networks and the number and distribution of available resources.
The performance of content delivery highly depends on the available resources and the number of consumers.

%The interaction of such applications with the network and other players, e.g. cloud providers, are usually not considered by the application developers.
%In peer-to-peer networks

% overview
% in this chapter, ...
In this chapter, we characterize the number of resources available in autonomous systems for the two content delivery concepts, peer-to-peer networks and content delivery networks and characterize the topology of autonomous systems.
%In peer-to-peer networks peers serve and request chunks of content at the same time, hence peers are also the resources for content delivery.
%In content delivery networks the resources are content caches that run in data centers. To get content even closer to users caches can also be installed at the last mile or on customer premise equipment in home networks.

Due to the location based server assignment for content delivery a distributed measurement architecture is necessary to identify the server resources.
While peers can easily be identified by probing trackers, the cache resources of content delivery networks can only be determined by probing the content delivery network from different locations.
Typically distributed measurement platforms such as PlanetLab are used for that purpose.
The problem is that these measurement platforms may not reflect the perspective as consumer, since they are hosted in NRENs and not in ISP networks.
We compare the capabilities of a crowdsourcing platform and a PlanetLab testbed for distributed active measurements.
%In order to characterize the distribution of resources in content delivery networks, simple tracking is not possible, since no publicly available registers exist.

Recent approaches \cite{greening} suggest to use resources on customer premise equipment such as home gateways or network attached storage to support content delivery while saving energy.
The potential of such peer assisted content delivery approaches, depends on the number of subscribers in the ISPs network.
To get a global view on the number of resources available in each autonomous system we evaluate the Internet Census Dataset, which contains a complete scan of the IP address range.

%\begin{figure}
%  \centering
%  \includegraphics[width=0.8\textwidth]{aslevel/figs/astopo}
%  \caption{Interactions between considered stakeholders in the application scenarios.}
%  \label{fig:aslevel:astopo}
%\end{figure}
\begin{figure}[bt]
	\centering
\vspace{-0.2cm}
\hspace{-0.5cm}
	\begin{subfigure}[b]{0.54\textwidth}
	  \includegraphics[width=\textwidth]{aslevel/figs/p2p}
    \vspace{-0.5cm}
    \caption{Peer-to-peer}
    \label{fig:aslevel:cdn}
  \end{subfigure}
\hspace{-0.5cm}
	\begin{subfigure}[b]{0.54\textwidth}
	 	\includegraphics[width=\textwidth]{aslevel/figs/cdn}
    \vspace{-0.5cm}
    \caption{Content delivery network}
    \label{fig:aslevel:cdn}
	\end{subfigure}
\hspace{-0.5cm}
	\caption{Autonomous system topology with a peer-to-peer (left) and a content delivery network (right).}
\end{figure}

% details, figure
In order to characterize peer-to-peer networks on autonomous system level,
we analyze a measurement study and identify the number of peers per swarm available in each autonomous system and investigate the performance of different peer selection strategies.
% we consider + metrics
As key performance indicators we determine
\begin{enumerate*}
\item the traffic volume and
\item the traffic costs
\end{enumerate*}
of Internet service providers.

%We compare a measurement study

The measurement results of the content delivery network YouTube and the characterizations serve as input for the performance evaluation of hierarchical content delivery networks under real world conditions.
Therefore, we use them in \refchap{hierarchical} to investigate the potential of hierarchical cache networks in realistic parameter studies.
In addition our results show that the size of ISP in terms of subscriber is highly heterogeneous, showing that more than 85\% of the IPs are active in only 1\% of the autonmous systems and that the 10 largest autonomous systems already contain 30\% of the active IPs.
%100 largest ISPs have 2/3 of active IPs

% contribution
%The contribution of this chapter are the following:
%\begin{enumerate}
%\item We determine the potential for locality in peer-to-peer networks.
%\item We develop and evaluate optimization strategies for peer selection.
%\item We determine the distribution of content servers in a global CDN.
%\item We provide a model for the distribution of IP-addresses on autonomous system.
%\end{enumerate}

The content from this chapter has been published in \cite{burger2012profit,burger2014vantage,burger2016hierarchical}.
\refsec{sec:aslevel:background} describes the background and presents related work.
The applied methodology to characterize the BitTorrent traffic and to estimate transit costs is described in \refsec{sec:aslevel:p2p}.
In \refsec{sec:aslevel:crowd} two approaches for distributed active measurements are compared.
The evaluation of the Internet-Census dataset and the derived model for the distribution of IP-addresses on autonomous systems is shown in \refsec{sec:aslevel:census}.
We discuss lessons learned in \refsec{sec:aslevel:lessons_learned}.

\input{aslevel/background/background}
\input{aslevel/p2p/p2p}
\input{aslevel/crowd/crowd}
\input{aslevel/census/census}
\input{aslevel/lessons_learned/lessons_learned}
